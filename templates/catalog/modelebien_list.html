{% extends 'base.html' %}

{% block content %}
<div class="row mb-4 align-items-center">
  <div class="col-md-8">
    <h1 class="display-6 fw-bold">ğŸ—ï¸ ModÃ¨les de biens</h1>
    <p class="lead text-muted">GÃ©rer les modÃ¨les commerciaux (T2, T3, Villa F4, etc.)</p>
  </div>
  <div class="col-md-4 text-end">
    <a href="{% url 'modelebien_create' %}" class="btn btn-success">
      â• Ajouter un modÃ¨le
    </a>
  </div>
</div>

{% if modeles %}
  <div class="card shadow-sm border-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th>Nom marketing</th>
            <th>Type</th>
            <th>Surface (mÂ²)</th>
            <th>Prix base TTC</th>
            <th>Nb. unitÃ©s</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for modele in modeles %}
            <tr>
              <td><strong>{{ modele.nom_marketing }}</strong></td>
              <td><span class="badge bg-secondary">{{ modele.type_bien.libelle }}</span></td>
              <td>{{ modele.surface_hab_m2|default:"-" }} mÂ²</td>
              <td>{{ modele.prix_base_ttc|floatformat:0 }} FCFA</td>
              <td><span class="badge bg-info">{{ modele.unites.count }}</span></td>
              <td>
                <div class="d-flex gap-1">
                  <a href="{% url 'modelebien_edit' modele.pk %}" class="btn btn-sm btn-warning">âœï¸</a>
                  <form method="post" action="{% url 'modelebien_delete' modele.pk %}" style="display: inline;"
                        onsubmit="return confirm('Supprimer ce modÃ¨le ?');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-danger">ğŸ—‘ï¸</button>
                  </form>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% else %}
  <div class="alert alert-info">
    <p class="mb-0">Aucun modÃ¨le de bien enregistrÃ©.</p>
  </div>
{% endif %}

<div class="mt-4">
  <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">â† Retour au dashboard</a>
</div>
{% endblock %}
